<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Scoreboard</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }

        body {
            height: 100vh;
            width: 100vw;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 0;
            margin: 0;
            background-color: #f0f0f0;
        }

        .scoreboard {
            display: flex;
            flex-direction: column;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(116.21deg, #052652 -3.25%, #2D9CDB 107.37%);
            border-radius: 0;
            padding: 20px;
            color: white;
        }



        .left-panel {
            width: 100%;
            background-image: url(https://res.cloudinary.com/dykvdhxke/image/upload/v1742622815/Rectangle_2_xaeduq.png);
            background-size: cover;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 20px;
            line-height: 25px;
        }

        .left-panel h2 {
            font-family: Poppins;
            font-weight: 700;
            font-size: 45px;
            line-height: 75px;
        }

        .left-panel h3 {
            font-family: Poppins;
            font-weight: 400;
            font-size: 32px;
            line-height: 1.2;
        }

        .clock {
            font-family: 'Digital-7', sans-serif;
            font-weight: 400;
            font-size: 38px;
            line-height: 1.2;
            margin: 10px 0;
            letter-spacing: 4px;
        }

        @font-face {
            font-family: 'Digital-7';
            src: url('/fonts/digital-7.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }


        .datee {
            letter-spacing: 4px;
            font-size: 20px;
        }

        .score-box h3 {
            font-family: Montserrat;
            font-weight: 500;
            font-size: 20px;
            line-height: 51.73px;
            letter-spacing: 0px;
            text-align: center;

        }

        .qr-code {
            /* margin-top: 20px; */
            padding: 10px;
        }

        .qr-code img {
            width: 100%;
            height: auto;
            border-radius: 30px;
        }

        .adver {
            font-family: Poppins;
            font-weight: 600;
            font-size: 24px;
            line-height: 1.5;
            margin: 10px 0;
        }

        .right-panel {
            width: 100%;
            padding: 0 10px;
        }

        .match-title {
            font-family: Montserrat;
            font-weight: 500;
            font-size: 24px;
            letter-spacing: 0px;
            text-align: center;
            display: flex;
            margin-bottom: 15px;
            line-height: 51px;
        }

        .score-box {
            display: flex;
            flex-direction: column;
            align-items: center;
            background-image: url(https://res.cloudinary.com/dykvdhxke/image/upload/v1742625465/Rectangle_3_eunref.png);
            background-size: cover;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            /* margin-top: px; */
            height: 46%;
        }

        .team-logo {
            width: 70%;
        }

        .score {
            font-family: Montserrat;
            font-weight: 700;
            font-size: 9rem;
            line-height: 1;
            margin: 10px 0;
        }

        .overs {
            font-family: Montserrat;
            font-weight: 500;
            font-size: 2rem;
            line-height: 85px;
        }

        .run-rate {
            font-family: Montserrat;
            font-weight: 500;
            font-size: 1.5rem;
            line-height: 1.2;
        }

        div {
            width: 100%;
        }

        .info-row {
            display: flex;
            flex-direction: column;
            background: rgba(141, 2, 2, 0.1);
            padding: 20px;
            margin-top: 5px;
            border-radius: 16px;
            gap: 4%;
        }

        .bowler-info,
        .batsman-info {
            width: 100%;
            line-height: 40px;
            margin-bottom: 10px;
        }

        .bowler-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 15px;
        }

        .bowler-table th,
        .bowler-table td {
            padding: 8px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            font-family: Montserrat;
            font-weight: 500;
            font-size: 23px;
        }

        .bowler-table th {
            font-weight: 600;
            color: rgba(255, 255, 255, 0.8);
        }

        .bowler-table td {
            font-weight: 500;
        }

    
        #batsman1Stats,
        #batsman2Stats {
            font-family: Montserrat;
            font-weight: 500;
            font-size: 22px;
            line-height: 50px;
        }

        #batsman1,
        #batsman2,
        #batsman1Stats,
        #batsman2Stats {
            font-family: Montserrat;
            font-weight: 500;
           font-weight: bold;
            line-height: 50px;
            letter-spacing: 1px;
        }

        .batsman-info p,
        .bowler-info p {
            display: flex;
            justify-content: space-between;
        }

        .headline {
            margin-top: 8px;
            font-size: 32px;
            text-align: center;
            color: rgba(255, 255, 255, 1);
        }

        .live-tag {
            background: green;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 1.8rem;
            margin-left: 10px;
            width: 12%;
            height: 60px;
        }

        @keyframes blink {
            0% {
                opacity: 1;
            }

            50% {
                opacity: 0;
            }

            100% {
                opacity: 1;
            }
        }


        .liveDot {
            margin-bottom: 2px;
            animation: blink 1s infinite;
        }

        .bowler-balls {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .ball {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background-color: white;
            color: black;
            font-weight: bold;
            border: 1px solid #ccc;
            font-size: 18px;
        }

        @media (max-width: 1500px) {
            .live-tag {
                background: green;
                color: white;
                padding: 5px 10px;
                border-radius: 5px;
                font-size: 1.8rem;
                margin-left: 10px;
                width: 15%;
                height: 60px;
            }
        }

        @media (min-width: 1500px) {
            .qr-code img {
                width: 90%;
                height: auto;
            }
        }

        @media (max-width: 1400px) {
            .live-tag {
                background: green;
                color: white;
                padding: 5px 10px;
                border-radius: 5px;
                font-size: 1.8rem;
                margin-left: 10px;
                width: 17%;
                height: 60px;
            }
        }

        @media (max-width: 1320px) {
            .live-tag {
                background: green;
                color: white;
                padding: 5px 10px;
                border-radius: 5px;
                font-size: 1.8rem;
                margin-left: 10px;
                width: 19%;
                height: 60px;
            }
        }

        @media (max-width: 1241px) {
            .live-tag {
                background: green;
                color: white;
                padding: 5px 10px;
                border-radius: 5px;
                font-size: 1.8rem;
                margin-left: 10px;
                width: 21%;
                height: 60px;
            }

            .clock {
                font-family: 'Digital-7', sans-serif;
                font-weight: 400;
                font-size: 32px;
                line-height: 1.2;
                margin: 10px 0;
                letter-spacing: 4px;
            }
        }

        @media (max-width: 1187px) {
            .live-tag {
                background: green;
                color: white;
                padding: 5px 10px;
                border-radius: 5px;
                font-size: 1.8rem;
                margin-left: 10px;
                width: 23%;
                height: 60px;
            }
        }

        @media (max-width: 1140px) {
            .live-tag {
                background: green;
                color: white;
                padding: 5px 10px;
                border-radius: 5px;
                font-size: 1.8rem;
                margin-left: 10px;
                width: 25%;
                height: 60px;
            }
        }

        @media (max-width: 1100px) {
            .live-tag {
                background: green;
                color: white;
                padding: 5px 10px;
                border-radius: 5px;
                font-size: 1.8rem;
                margin-left: 10px;
                width: 27%;
                height: 60px;
            }

            .adver {
                font-family: Poppins;
                font-weight: 600;
                font-size: 24px;
                line-height: 1.5;
                margin: 10px 0;
            }

            .clock {
                font-family: 'Digital-7', sans-serif;
                font-weight: 400;
                font-size: 30px;
                line-height: 1.2;
                margin: 10px 0;
                letter-spacing: 4px;
            }
        }

        @media (max-width: 1067px) {
            .score {
                font-size: 8rem;
            }
        }

        @media (max-width: 1062px) {
            .live-tag {
                background: green;
                color: white;
                padding: 5px 10px;
                border-radius: 5px;
                font-size: 1.8rem;
                margin-left: 10px;
                width: 31%;
                height: 60px;
            }

            .score-box {
                height: 45%;
            }
        }

        @media (min-width: 768px) {
            .scoreboard {
                flex-direction: row;
            }

            .left-panel {
                width: 25%;
                margin-bottom: 0;
            }

            .right-panel {
                width: 75%;
                padding: 0 20px 0 40px;
            }

            .score-box {
                flex-direction: row;
                justify-content: space-around;
            }

            .info-row {
                flex-direction: row;
            }

            .bowler-info,
            .batsman-info {
                width: 48%;
            }


            .overs {
                font-size: 3rem;
            }

            .run-rate {
                font-size: 1.7rem;
            }

            .headline {
                font-size: 32px;
            }
        }

        @media (max-width: 767px) {

            .bowler-table th,
            .bowler-table td {
                padding: 6px 4px;
                font-size: 0.9rem;
            }
        }
    </style>
</head>

<body>

    <div class="scoreboard">
        <div class="left-panel">
            <div>
                <h2>Tuesday</h2>
                <h3>Evening</h3>
            </div>
            <svg width="200" height="4" viewBox="0 0 339 4" fill="none" xmlns="http://www.w3.org/2000/svg">
                <line x1="0.00195312" y1="2.47009" x2="338.582" y2="2.47009" stroke="white" stroke-opacity="0.4"
                    stroke-width="3" />
            </svg>

            <div class="clock" id="clock">00:00:00</div>
            <p class="datee" id="realTimeDate"></p>

            <script>
                function updateDate() {
                    const options = { day: 'numeric', month: 'long', year: 'numeric', timeZone: 'Asia/Kolkata' };
                    const today = new Date().toLocaleDateString('en-GB', options);
                    document.getElementById('realTimeDate').textContent = today;
                }

                updateDate(); // Call the function to display the date
            </script>


            <svg width="200" height="4" viewBox="0 0 339 4" fill="none" xmlns="http://www.w3.org/2000/svg">
                <line x1="0.00195312" y1="2.47009" x2="338.582" y2="2.47009" stroke="white" stroke-opacity="0.4"
                    stroke-width="3" />
            </svg>

            <div class="qr-code">
                <img src="https://res.cloudinary.com/dykvdhxke/image/upload/v1744088845/Aek_Sports_Apk_eabwzz.png" alt="QR Code"
                    width="100">
            </div>
            <p class="adver">Scan the QR code to download AekSports now & get live cricket scores! üì≤üèèüî•</p>
            <!-- <p class="adver">+91 8090802014</p> -->
        </div>

        <div class="right-panel">
            <div class="match-title">
                <h2 id="matchTitle">-</h2><span class="live-tag"><svg class="liveDot" width="15" height="15"
                        viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="7.72684" cy="7.4849" r="7.24247" fill="white" />
                    </svg>
                    LIVE</span>
            </div>
            <div class="score-box">
                <div style="width: 50%;">
                    <!-- <img class="rcb" src="" alt="RCB Logo" width="50"> -->
                    <!-- <img class="team-logo" src="" alt="Team Logo" width="50" id="teamLogo"> -->
                    <img class="team-logo" src="" alt="Team 1 Logo" width="50" id="teamLogo1">
                </div>

                <!-- <img id="teamLogo" src="image.png" alt="Team Logo" width="50"> -->
                <div>
                    <div class="score" id="teamScore">-</div>
                    <!-- <h3>Currently Batting: <span id="battingTeam">-</span></h3> -->
                    <!-- <h3>Currently Batting: <span id="battingTeam">-</span></h3> -->

                    <div>
                        <div class="overs" id="overs">OVER: -</div>
                    </div>
                    <h3 id="targetScore">Target: -</h3>
                </div>


            </div>

            <div class="info-row">
                <div class="bowler-info">
                    <table class="bowler-table">
                        <thead>
                            <tr>
                                <th>Bowler</th>
                                <th>Overs</th>
                                <th>Runs</th>
                                <th>Wkts</th>
                                <th>Econ</th>
                            </tr>
                        </thead>
                        <tbody id="bowlerStats">
                            <!-- This will be populated by JavaScript -->
                        </tbody>
                    </table>
                    <p class="bowler-balls" id="bowlerBalls"></p>
                </div>
                <div class="batsman-info">
                    <p><strong id="batsman1">-</strong> <span id="batsman1Stats">-</span></p>
                    <p><strong id="batsman2">-</strong> <span id="batsman2Stats">-</span></p>
                </div>
            </div>

            <h1 class="headline" id="matchStatus"> <svg width="18" height="18" viewBox="0 0 22 22" fill="none"
                    xmlns="http://www.w3.org/2000/svg">
                    <circle cx="11" cy="11" r="11" fill="#00A050" />
                </svg>
                -</h1>
        </div>
    </div>


    <script>
        document.addEventListener("DOMContentLoaded", () => {
            function updateClock() {
                let now = new Date();
                let hours = now.getHours();
                let minutes = now.getMinutes();
                let seconds = now.getSeconds();
                let ampm = hours >= 12 ? 'PM' : 'AM';
                hours = hours % 12 || 12;
                minutes = minutes < 10 ? '0' + minutes : minutes;
                seconds = seconds < 10 ? '0' + seconds : seconds;
                document.getElementById("clock").innerText = `${hours}:${minutes}:${seconds} ${ampm}`;
            }
            setInterval(updateClock, 1000);
            updateClock();


            const teamLogos = {
                'Lucknow Super Giants': 'https://res.cloudinary.com/dykvdhxke/image/upload/v1742618962/Original_Lucknow_Super_Giants_PNG-SVG_File_Download_Free_Download_kqyk0y.png',
                'Delhi Capitals': 'https://res.cloudinary.com/dykvdhxke/image/upload/v1742618962/Original_Delhi_Capitals_Logo_PNG-SVG_File_Download_Free_Download_zwrnxu.png',
                'Punjab Kings': 'https://res.cloudinary.com/dykvdhxke/image/upload/v1742618963/Original_Punjab_Kings_PNG-SVG_File_Download_Free_Download_zld244.png',
                'Gujarat Titans': 'https://res.cloudinary.com/dykvdhxke/image/upload/v1742618963/Original_Gujarat_Titans_Logo_PNG-SVG_File_Download_Free_Download_q8gsm8.png',
                'PMD': 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRloofqOzXRqDZgAwCIzxpaqKxV6l54oxl-LQ&s',
                'DRJU': 'https://marketplace.canva.com/EAFzZqHNCIE/1/0/1600w/canva-red-and-black-illustrative-cricket-club-logo-jqO8d_9OWwA.jpg',
                'Rajasthan Royals': 'https://res.cloudinary.com/dykvdhxke/image/upload/v1742618962/Original_Rajasthan_Royals_Logo_PNG-SVG_File_Download_Free_Download_tnyvbq.png',
                'Kolkata Knight Riders': 'https://res.cloudinary.com/dykvdhxke/image/upload/v1742618962/Original_Kolkata_Knight_Riders_PNG-SVG_File_Download_Free_Download_btlibn.png',
                'Sunrisers Hyderabad': 'https://res.cloudinary.com/dykvdhxke/image/upload/v1742618963/Original_Sunrisers_Hyderabad_PNG-SVG_File_Download_Free_Download_o79rcq.png',
                'Chennai Super Kings': 'https://res.cloudinary.com/dykvdhxke/image/upload/v1742618963/Original_Chennai_Super_Fun_Logo_PNG_-_SVG_File_Download_Free_Download_rnuqli.png',
                'Royal Challengers Bengaluru': 'https://res.cloudinary.com/dykvdhxke/image/upload/v1742618962/Original_Royal_Challengers_Bangalore_PNG-SVG_File_Download_Free_Download_jb3smp.png',
                'Mumbai Indians': 'https://res.cloudinary.com/dykvdhxke/image/upload/v1742618963/Original_Mumbai_Indians_PNG-SVG_File_Download_Free_Download_vohpwv.png'
            };


            async function fetchData() {
                try {
                    const response = await fetch('api/live-match');
                    if (!response.ok) throw new Error(`HTTP error! Status: ${response.status}`);

                    const data = await response.json();
                    console.log("API Response:", data);

                    if (!data) {
                        console.error("No data received from API.");
                        return;
                    }

                    // Update Match Title
                    const matchTitle = data.matchTitle || 'Match Title';

                    // Ensure the match title is properly formatted
                    const teams = matchTitle.split(" vs ") || ["-", "-"];
                    const team1 = teams[0].trim();
                    const team2 = teams[1] ? teams[1].trim() : "-"; // Keep the full second team name

                    // Construct the new title without truncation
                    const formattedTitle = `${team1} vs ${team2}`;


                    // Update UI
                    document.getElementById('matchTitle').innerText = formattedTitle;


                    // Extract innings data
                    const firstInnings = data.innings?.[1] || { score: '-', team: '-' };
                    const secondInnings = data.innings?.[1] || { score: '-', team: '-' };


                    // Set logos for both teams
                    document.getElementById('teamLogo1').src = teamLogos[team1] || '';
                    // document.getElementById('teamLogo2').src = teamLogos[team2] || '';

                    // Identify current batting team
                    //   const battingTeam = data.currentScore?.[0] || { score: '-', team: '-' };
                    //     document.getElementById('battingTeam').innerText = battingTeam.team || '-';


                    const battingTeamm = data.currentScore?.[1] || { score: '-', team: '-' };
                    // Extract only the first number (which is the score)
                    const extractedScore = battingTeamm.score.match(/\d+/)?.[0] || '-';
                    document.getElementById('targetScore').innerText = `Target ${extractedScore} ` || '-';




                    // Change logo based on match title/team name
                    const teamName = data.matchTitle || '';  // Assuming the match title is the team name
                    const logoUrl = teamLogos[teamName] || ''; // Get logo from the teamLogos object

                    // Update the logo
                    if (logoUrl) {
                        document.getElementById('teamLogo').src = logoUrl;
                    }

                    // Update Team Score and Overs
                    // Update Team Score and Overs
                    // const team = data.currentScore?.[0] || { score: '-', team: '-' };
                    // const team = data.currentScore?.[1] || { score: '-', team: '-' };
                    // Determine the currently batting team
                    const currentBattingIndex = data.currentScore === 1 ? 1: 1;// 1 means second innings, otherwise first
                    const currentBattingTeam = data.currentScore?.[currentBattingIndex] || { score: '-', team: '-' };
                    console.log("battingTeamName",currentBattingTeam);

                    // Get the batting team name
                    const battingTeamName = currentBattingTeam.team || '-';
                    console.log("battingTeamName",battingTeamName);

                    // Dynamically update the batting team logo
                    const teamLogoElement = document.getElementById('teamLogo1');
                    if (teamLogoElement) {
                        teamLogoElement.src = teamLogos[battingTeamName] || '';
                        teamLogoElement.alt = `${battingTeamName} Logo`;
                    }
                    // // Determine the currently batting team index
                    // const currentBattingIndex = data.currentScore === 0 ? 0 : 0; // 1 means second innings, otherwise first
                    // const currentBattingTeam = data.currentScore?.[currentBattingIndex]?.team || '-';
                    // const currentBattingTeam = data.innings?.[currentBattingIndex] || { score: '-', team: '-' };



                    // Extract score and overs separately
                    const scoreMatch = currentBattingTeam.score.match(/^([\d-]+)/); // Extracts "128-8"
                    const oversMatch = currentBattingTeam.score.match(/\(([\d.]+)\)/); // Extracts "20.
                    // Update the batting team's score in the UI
                    // Update the batting team's score in the UI
                    document.getElementById('teamScore').innerText = scoreMatch ? scoreMatch[0] : '-';
                    document.getElementById('overs').innerText = `OVER: ${oversMatch ? oversMatch[1] : '-'}`;




                    // Extract overs
                    // const oversMatch = team.score.match(/\((\d+(\.\d+)?)\)/);
                    // document.getElementById('overs').innerText = `OVER: ${oversMatch ? oversMatch[1] : '-'}`;

                    // Update Bowler Info
                    const bowlers = data.bowlers || [];
                    const bowlerStatsElement = document.getElementById('bowlerStats');
                    bowlerStatsElement.innerHTML = '';
 
                    bowlers.forEach(bowler => {
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td style="font-size: 18px; font-weight: bold;">${bowler.name || '-'}</td>
                            <td>${bowler.overs || '-'}</td>
                            <td>${bowler.runs || '-'}</td>
                            <td>${bowler.wickets || '-'}</td>
                            <td>${bowler.economy || '-'}</td>
                        `;
                        bowlerStatsElement.appendChild(row);
                    });

                    // Update Last Over (Only Last 6 Balls)
                    const bowlerBallsElement = document.getElementById('bowlerBalls');
                    if (bowlerBallsElement && data.lastOver) {
                        let lastBalls = data.lastOver.split('|').join('').trim().split(' ').filter(b => b !== '');
                        lastBalls = lastBalls.slice(-6); // Get only last 6 balls

                        const ballHTML = lastBalls.map(ball => {
                            let className = 'ball';
                            if (ball === 'W') className += ' W';
                            else if (ball === '4') className += ' F';
                            else if (ball === '6') className += ' S';
                            return `<span class="${className}">${ball}</span>`;
                        }).join('');

                        bowlerBallsElement.innerHTML = ballHTML;
                    } else {
                        bowlerBallsElement.innerHTML = '-';
                    }

                    // Update Batsmen Info
                    const batsman1 = data.batters?.[0] || { name: '-', runs: '-', balls: '-' };
                    const batsman2 = data.batters?.[1] || { name: '-', runs: '-', balls: '-' };
                    document.getElementById('batsman1').innerText = batsman1.name;
                    document.getElementById('batsman1Stats').innerText = `${batsman1.runs} (${batsman1.balls})`;
                    document.getElementById('batsman2').innerText = batsman2.name;
                    document.getElementById('batsman2Stats').innerText = `${batsman2.runs} (${batsman2.balls})`;
                    document.getElementById('matchStatus').innerText = `${data.matchStatus} `;





                } catch (error) {
                    console.error('Failed to fetch live data:', error);
                }
            }

            // Fetch data initially and update every 10 seconds
            fetchData();
            setInterval(fetchData, 10000);


        });

    </script>

</body>

</html>
